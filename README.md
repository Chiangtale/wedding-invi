# 모바일 청첩장 개발

## 기술스택

- [Sveltekit](https://kit.svelte.dev)
  - Svelte를 사용하여 웹 애플리케이션을 구축하기 위한 프레임워크
  - SvelteKit을 사용하면 서버 측 렌더링, 라우팅 및 API 호출을 쉽게 처리가능
  - Node.js, Deno 및 Lambda와 같은 다양한 백엔드와 함께 사용할 수 있음
- [Vercel](https://vercel.com/dashboard)
  - AWS와 같은 클라우드 컴퓨팅 서비스를 제공하는 회사
  - Next.js 개발팀에서 만든 프론트엔드 호스팅 사이트를 제공
  - 모든 설정을 수동으로 할 필요 없이 사용하고 싶은 소스를 정하고 Deploy만 하면 나머지 빌드 과정이나 운영(스케일링 등)은 버셀이 모두 처리
  - 개발자는 개발을 한 후 deploy후 결과를 받는 프로세스를 반복하며 개발을 진행
- [MongoDB](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&ved=2ahUKEwjctcPrstaBAxVbdXAKHadlAF4QFnoECAcQAQ&url=https%3A%2F%2Fwww.mongodb.com%2F&usg=AOvVaw2ODprZpw7B6asXJGVwvA-G&opi=89978449)
  - MongoDB는 유연하고 확장 가능한 방식으로 데이터를 저장하고 검색하는 데 사용되는 인기 있는 오픈 소스 No SQL 데이터베이스
  - MongoDB atlas는 MongoDB의 완전 관리형 클라우드 데이터베이스 서비스
  - Vercel과의 연계성이 좋음

## 개발 이유?

결혼 준비 과정에서 직접 할 수 있는 부분은 없을 지 고민해보았다. 
직접하게되면 완성도 면에서는 조금 떨어질 지 몰라도, 특별한 output이 나온다는 데에 의의가 있다고 생각한다.
프로포즈 영상, 웨딩 촬영, 모바일 청첩 등을 직접 제작을 하였다.
모바일 청첩의 경우 최대한 다른 청첩장들을 참고하되, 하트를 누르면 애니메이션이 변경되는 효과를 적용하여 차별화하였다.
모바일 청첩장의 구성은 다음으로 이루어진다. 

1. 제목
2. 메인이미지
  - 하트 내려오는 애니메이션 구현
4. 메인글귀
  - 메인 글귀
  - 글귀에 맞는 이미지 배치
5. 달력
  - 정적인 날짜를 표기하는 달력 컴포넌트 구현
6. 갤러리
  - 라이브러리(swiper.js)를 사용하여 개발
7. 위치안내
  - 카카오, 네이버, 티맵 API 연동
  - 네이버 지도 연동
8. 방명록
  - mongo db atlas 구성
  - 이름, 비밀번호, 문구를 저장하는 컬렉션 생성
  - get/set API 구현
9. 계좌
  - 카카오페이 연동
  - 계좌 복사하기 기능 구현 
10. 꼬리말
  - 깃헙 연동

---

스벨트는 각각을 컴포넌트화하여 개발할 수 있는게 직관적이고 코드가 짧다고 느꼈다. 
그리고 기본 HTML 베이스에 템플릿코드를 짜는 것과 비슷하였다. 위의 항목들에서 몇가지 기억에 남는 것들을 정리해보았다. 

### 하트 이미지 애니메니션
가끔 특정 웹사이트를 들어가면 CSS를 통해 웹사이트에 변화를 주던게 생각이 났다. 
네이버 메인페이지에 들어갔을 때 날씨에 따라 눈,비가 내리는 애니메이션 효과가 그러한 예시인데,
구글링을 통하여 비슷한 [기능](https://codepen.io/massiebn/pen/OJMbXz)을 찾아볼 수 있었고, 이를 svelte 쪽 TS로 변경하여 적용하였다.
하트를 누를 때마다 떨어지는 애니메이션을 달리주면 재밌을 것 같아 해당 기능을 적용했다.
코드 내부적으로는 이모지를 많이 썼는데 특정 브라우저에 따라 이모지가 깨져보이는 경험도 하여(최신 아이폰 사파리, 윈도우 엣지) 이모지를 변경한 기억이 인상깊다.
플랫폼 디펜던시가 없겠거니 하고 내폰인 아이폰미니12와 여자친구의 갤럭시S20 그리고 맥 크롬만 확인하고 넘어갔었다. 그 후엔 다양한 케이스에 대해 테스트를 해보면서 진행을 하게 되었다.

### 메인글귀 
메인글귀를 직접 만든만큼 그에 맞는 이미지도 직접 생성하고 싶었다. 
아이디어상으로는 넝쿨이 문구를 감싸는 이미지를 이미 구상하고 있었고, 저작권이 없는 이미지가 필요했다. 
처음으로 생각했던건 AI를 통해 이미지를 생성하는거 였으나 무료 사이트의 경우 생각보다 내가 원하는 이미지가 나오지 않았다. 
[DALL-E](https://ndolson.com/5774)를 사용해보고 싶었으나, 무료체험 크레딧이 없어 하지는 못했다.
결국은 여자친구가 직접 파워포인트 같은 걸로 직접 개체들을 한땀한땀 붙여가며 만들었다. 
이번 프로젝트에서 매우 만족스러운 결과물 중 하나이다. 여자친구도 같이참여했다는거에 큰 의미가 있다.
이외에도 여자친구는 최초의 1인 고객이었기 때문에 다양한 요구사항이나 불편사항들을 리포팅해주었다. 
고칠 것들은 고쳐가면서 점점 괜찮아지는 결과물을 보니 매우 뿌듯했다. 

### 달력 
달력의 경우에도 라이브러리를 이용해서 해보았으나, 레이아웃이 생각보다 마음에 들지 않았고 요일 배치가 마음에 들지 않았다. 
따로 사용자 이벤트를 처리하거나 구글 캘린더에 저장등 복잡한 기능을 요하지 않았기 때문에 특정날짜를 visualize만 할 수 있는 컴포넌트를 구성했다. 

### 갤러리
갤러리의 경우 가장 난관이 컸었는데, 처음에는 직접 구현을 했었다. 
다른 청첩장들을 참고하여 사진한장을 메인으로 배치하고, 하단에 이미지 리스트를 스와이핑할 수 있도록 구성했었다. 
그런데 스와이프 중인 상태를 보여주기엔 좀 더 난이도가 필요했었고... 조악하게 직접 만든 티를 벗어날 순 없었다. 
결국 [swiper.js](https://v8.swiperjs.com/svelte)를 이용하여 몇줄로 더욱 많은 기능들이 들어간 깔끔한 갤러리를 구성할 수 있었다.
라이브러리 도큐먼트를 읽어가며 원하는 갤러리로 만들어갔다. 
그러나 그 뒤에도 문제가 좀 있었는데, 카톡 인앱브라우저에서만 스와이핑이 매우 불편했다.
좌우 스와이핑 중에 상하 스크롤이 먹는 이슈가 있었는데, 사용자가 좌우 스와이핑을 정확히 수평으로 하지 않기 때문에 한손으로 하게되면 스크롤이 같이 먹혀 엄청 불편했다. 
처음엔 특정 브라우저에서 발생하는 문제인지도 인지를 못했고, 사용하다보니 아이폰 사파리에서는 가능한데 카톡 채팅방 링크를 통해 들어간 인앱브라우저에서만 그런 말썽이 생겼다. 
결국은 라이브러리를 더 정독하여 swipe 시작 시 받을 수 있는 콜백과, 스와이프중인 상태를 확인할 수 있는 값을 통해 스와이프 중일 때는 스크롤이 불가하도록 예외처리를 했다. 
사진 비율이 다를 때에 레이아웃 대한 문제점 있었는데 이것도 도큐먼트를 자세히 찾아보니 방법이 있었던걸로 기억한다. 
덕분에 라이브러리도큐먼트도 정독하고 많은 시간을 투자하여 그래도 어느정도 이슈를 해결한 뿌듯함이 있었다.  

### 위치안내
위치 안내의 경우 메인지도를 네이버지도를 API key를 받아서 띄우고, 내비게이션을 위한 버튼들을 구성헀다.
각각 API key를 받아서 사용하면 되고 참고할 자료도 많아서 외부연동은 큰 문제는 없이 진행할 수 있었다. 
다만 svelte 자체에 대한 이해도가 부족했기 때문에 간헐적으로 지도가 안뜨는 이슈가 있었다. (정확히는 최초 웹사이트 진입 시 지도가 비워져있음)
이에 대한 설명 추가 필요

### 방명록

### 계좌

그외에도 vercel과 mongodb 연동 env 등





## TODO

- 별도의 청첩장 템플릿 레포지토리 개발
  - 현 레포지토리는 본인의 모바일 청첩 개발용 하드코딩된 레포지토리
  - 리소스(문구, 앨범 등) 변경을 스크립트를 통해 자동화 할 수 있도록 추가 예정
- 간단한 청첩장 에디터 구현
  - GUI 상에서 청첩장 에디팅이 가능한 프로젝트 개발
  - 배포기능도 제공

## Vercel hosting URL

- https://wedding-invi-one.vercel.app

## Developing

로컬 서버를 띄워보는 방법

```bash
npm install
npm run dev

# or start the server and open the app in a new browser tab
npm run dev -- --open
```

## Building

To create a production version of your app:

```bash
npm run build
```

You can preview the production build with `npm run preview`.

> To deploy your app, you may need to install an [adapter](https://kit.svelte.dev/docs/adapters) for your target environment.
